<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GymRat PR</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('https://github.com/Samuelprchzk/Gymrats/blob/main/cvicenie.jpg?raw=true');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: white;
            padding: 20px;
            max-width: 700px;
            margin: auto;
        }

        h1 {
            text-align: center;
            text-shadow: 2px 2px 4px #000;
        }

        .menu {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }

        .menu-button {
            font-size: 30px;
            cursor: pointer;
            user-select: none;
        }

        .menu-content {
            display: none;
            position: absolute;
            background-color: rgba(0,0,0,0.7);
            min-width: 160px;
            border-radius: 5px;
            overflow: hidden;
            z-index: 1;
        }

        .menu-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .menu-content a:hover {
            background-color: rgba(255,255,255,0.2);
        }

        .form-group {
            margin-bottom: 10px;
        }

        input {
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            border: none;
            margin-top: 5px;
            background-color: rgba(200,200,200,0.4);
            color: white;
            text-shadow: 1px 1px 2px black;
        }

        button {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background-color: #3498db;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #2980b9;
        }

        .entry-list {
            margin-top: 20px;
            background-color: rgba(50,50,50,0.3);
            padding: 10px;
            border-radius: 5px;
        }

        .pr-entry {
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px black;
            background-color: rgba(50,50,50,0.3);
            padding: 5px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delete-btn {
            cursor: pointer;
            color: red;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            width: 14.28%;
            text-align: center;
            padding: 10px;
            border: 1px solid rgba(255,255,255,0.3);
            cursor: pointer;
            vertical-align: top;
        }

        th {
            background-color: rgba(0,0,0,0.6);
        }

        td {
            background-color: rgba(0,0,0,0.4);
        }

        td:hover {
            background-color: rgba(0,0,0,0.7);
        }

        .pr-calendar-entry {
            font-size: 12px;
            color: #ffd700;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <h1>GymRat PR</h1>

    <div class="menu">
        <span class="menu-button" onclick="toggleMenu()">&#8942;</span>
        <div class="menu-content" id="myMenu">
            <a href="#" onclick="showPage('home')">Home</a>
            <a href="#" onclick="showPage('calendar')">PR Calendar</a>
        </div>
    </div>

    <div id="home">
        <div class="form-group">
            <label>Weight (kg):</label>
            <input type="number" id="weight">
        </div>
        <div class="form-group">
            <label>Date:</label>
            <input type="date" id="date">
        </div>
        <div class="form-group">
            <label>Exercise:</label>
            <input type="text" id="exercise">
        </div>
        <div class="form-group">
            <label>Reps:</label>
            <input type="number" id="reps">
        </div>
        <button onclick="savePR()">Save PR</button>

        <div class="entry-list" id="entryList"></div>
    </div>

    <div id="calendar" style="display:none;">
        <div class="calendar-header">
            <button onclick="prevMonth()">â—€</button>
            <h2 id="monthYear"></h2>
            <button onclick="nextMonth()">â–¶</button>
        </div>
        <table id="calendarTable"></table>
    </div>

    <script>
        function toggleMenu() {
            const menu = document.getElementById("myMenu");
            menu.style.display = (menu.style.display === "block") ? "none" : "block";
        }

        function showPage(page) {
            document.getElementById("home").style.display = (page === "home") ? "block" : "none";
            document.getElementById("calendar").style.display = (page === "calendar") ? "block" : "none";
            document.getElementById("myMenu").style.display = "none";
            if(page === "calendar") {
                generateCalendar(currentMonth, currentYear);
            }
        }

        function savePR() {
            const weight = document.getElementById("weight").value;
            const date = document.getElementById("date").value;
            const exercise = document.getElementById("exercise").value;
            const reps = document.getElementById("reps").value;

            if(!weight || !date || !exercise || !reps) {
                alert("Fill in all fields!");
                return;
            }

            let prRecords = JSON.parse(localStorage.getItem("prRecords") || "[]");
            prRecords.push({weight, date, exercise, reps});
            localStorage.setItem("prRecords", JSON.stringify(prRecords));

            document.getElementById("weight").value = "";
            document.getElementById("date").value = "";
            document.getElementById("exercise").value = "";
            document.getElementById("reps").value = "";

            showPRList();
        }

        function showPRList() {
            const listDiv = document.getElementById("entryList");
            listDiv.innerHTML = "";
            const prRecords = JSON.parse(localStorage.getItem("prRecords") || "[]");
            prRecords.forEach((r, index) => {
                const div = document.createElement("div");
                div.className = "pr-entry";
                div.innerHTML = `<span>${r.date} - ${r.exercise} - ${r.weight}kg - ${r.reps} reps</span>
                                 <span class="delete-btn" onclick="deletePR(${index})">ðŸ—‘</span>`;
                listDiv.appendChild(div);
            });
        }

        function deletePR(index) {
            let prRecords = JSON.parse(localStorage.getItem("prRecords") || "[]");
            prRecords.splice(index, 1);
            localStorage.setItem("prRecords", JSON.stringify(prRecords));
            showPRList();
        }

        showPRList();

        const calendarTable = document.getElementById("calendarTable");
        const monthYear = document.getElementById("monthYear");
        const today = new Date();
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();
        const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];

        function generateCalendar(month, year) {
            calendarTable.innerHTML = "";
            monthYear.textContent = months[month] + " " + year;

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            let date = 1;
            const daysOfWeek = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
            let headerRow = document.createElement("tr");
            daysOfWeek.forEach(d => {
                let th = document.createElement("th");
                th.textContent = d;
                headerRow.appendChild(th);
            });
            calendarTable.appendChild(headerRow);

            const prRecords = JSON.parse(localStorage.getItem("prRecords") || "[]");

            for(let i=0; i<6; i++) {
                let row = document.createElement("tr");
                for(let j=0; j<7; j++) {
                    let cell = document.createElement("td");
                    if(i === 0 && j < firstDay) {
                        cell.textContent = "";
                    } else if(date > daysInMonth) {
                        cell.textContent = "";
                    } else {
                        cell.textContent = date;
                        const dayStr = `${year}-${(month+1).toString().padStart(2,'0')}-${date.toString().padStart(2,'0')}`;
                        prRecords.filter(r => r.date === dayStr).forEach(r => {
                            const div = document.createElement("div");
                            div.className = "pr-calendar-entry";
                            div.textContent = `${r.exercise}: ${r.weight}kg x ${r.reps}`;
                            cell.appendChild(div);
                        });
                        date++;
                    }
                    row.appendChild(cell);
                }
                calendarTable.appendChild(row);
            }
        }

        function prevMonth() {
            currentMonth--;
            if(currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar(currentMonth, currentYear);
        }

        function nextMonth() {
            currentMonth++;
            if(currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar(currentMonth, currentYear);
        }
    </script>
</body>
</html>
